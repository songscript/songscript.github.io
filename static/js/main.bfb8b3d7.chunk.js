(this["webpackJsonpsillakorean.com"]=this["webpackJsonpsillakorean.com"]||[]).push([[0],{190:function(t,e,n){},207:function(t,e){},209:function(t,e){},219:function(t,e){},221:function(t,e){},248:function(t,e){},249:function(t,e){},254:function(t,e){},256:function(t,e){},280:function(t,e){},321:function(t,e,n){"use strict";n.r(e);var c=n(2),r=n(0),i=n.n(r),a=n(52),o=n.n(a),s=(n(190),n(191),n(105)),u=n(10),j=n(345),b=n(334),l="#f4f4f4",f=n(13),O=n(341),h=function(t){return Object(c.jsx)(O.a,Object(f.a)(Object(f.a)({},t),{},{display:"flex",children:t.children}))},d=function(t){return Object(c.jsx)(h,Object(f.a)(Object(f.a)({},t),{},{flexDirection:"column",children:t.children}))},x=function(t){return Object(c.jsx)(h,Object(f.a)({alignItems:"center",justifyContent:"center"},t))},p=n(37),m=function(t){var e=t.absolute,n=Object(p.a)(t,["absolute"]);return Object(c.jsx)(x,Object(f.a)({flexDirection:"column",bottom:0,right:0,left:0,position:e?"absolute":"fixed"},n))},g=function(t,e){var n=t.bg,r=t.style,i=t.height,a=t.children,o=Object(p.a)(t,["bg","style","height","children"]),s=Object(f.a)({height:i},r);return Object(c.jsxs)("div",Object(f.a)(Object(f.a)({},o),{},{style:s,ref:e,children:[n&&Object(c.jsx)(m,{zIndex:-9,top:0,style:{backgroundColor:n}}),a]}))},v=i.a.forwardRef(g),y=function(t){return Object(c.jsx)(v,{bg:l,children:Object(c.jsx)(d,{children:Object(c.jsx)(b.a,{children:Object(c.jsxs)(x,{height:400,flexDirection:"column",children:[Object(c.jsx)("div",{className:"title",children:"404"}),Object(c.jsx)("p",{children:"The page you are looking for does not exist."}),Object(c.jsx)("p",{children:"\u627e\u4e0d\u5230\u9801\u9762"})]})})})})},k=n(28),w=n(337),C=n(343),I=n(342),S="https://www.storysberg.com/songscript",E=n(24),F=n(73),M=n(174),T=n(335),A=function(){return Object(c.jsx)(m,{top:0,children:Object(c.jsx)(T.a,{})})},N=n(338),R=n(339),D=n(109),L=n.n(D),z=n(175),U=n(176),q=new Map;function B(t){var e=$(),n=Object(k.a)(e,1)[0],c=void 0===n?{}:n,i=Object(r.useState)(),a=Object(k.a)(i,2),o=a[0],s=a[1],u=t.onError,j=t.dir,b=void 0===j?"":j,l=t.configName,f=t.hasLocale,O=void 0!==f&&f,h=t.ext,d=void 0===h?".json":h,x=S;return x+=O?"/"+q.get(c.locale):"",x+=b,x+="/"+l+d,Object(r.useEffect)((function(){Object(z.a)(L.a.mark((function t(){var e,n,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch(x+"?v="+ +new Date).then((function(t){if(!t.ok)throw u&&u(),Error(t.statusText);return t})).catch(console.warn);case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return");case 7:if(".json"!==d){t.next=14;break}return t.t0=s,t.next=11,e.json();case 11:return t.t1=t.sent,(0,t.t0)(t.t1),t.abrupt("return");case 14:return t.next=16,e.text();case 16:n=t.sent,t.t2=d,t.next=".ini"===t.t2?20:".csv"===t.t2?22:24;break;case 20:return c=Object(U.parse)(n),t.abrupt("break",24);case 22:return c=n.split("\n").filter((function(t){return!!t})),t.abrupt("break",24);case 24:s(c);case 25:case"end":return t.stop()}}),t)})))()}),[u,c.locale,b,x,d,l]),o}q.set("en","english"),q.set("zh","chinese");var H=function(t){var e=t.src,n=t.onReady,i=Object(p.a)(t,["src","onReady"]),a=Object(r.useState)(!1),o=Object(k.a)(a,2),s=o[0],u=o[1],j=Object(r.useRef)(),b=Object(r.useCallback)((function(){u(!0),n&&n(j)}),[u,n]);return Object(r.useEffect)((function(){var t=j.current;if(t&&e)return t.setAttribute("src",e),t.addEventListener("load",b),function(){t&&t.removeEventListener("load",b)}}),[e,b]),s?Object(c.jsx)("img",Object(f.a)({alt:""},i)):Object(c.jsx)("img",{style:{visibility:"hidden"},ref:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){t&&(j.current=t,j.current.draggable=!1)})),alt:""})},J=function(t){var e,n=t.opacity,r=t.children,i=t.src,a=Object(p.a)(t,["opacity","children","src"]);return Object(c.jsxs)(m,Object(f.a)(Object(f.a)({top:0},a),{},{children:[i&&Object(c.jsx)(H,{src:(e=i,Object(E.doIf)(e,(function(t){return!Object(F.isUrl)(t)}),(function(t){return S+"/image"+t}))),style:{opacity:n,maxHeight:"100vh",display:"block",alignSelf:"center"}}),r]}))},P=n(336),G=n(344),K=n(177),Q=n(178),V=function(){function t(e){Object(K.a)(this,t),this.props=void 0,this.running=!1,this.frameId=null,this.lastMoment=void 0,this.props=e,this.print(0)}return Object(Q.a)(t,[{key:"start",value:function(){this.lastMoment=performance.now(),this.running||(this.running=!0,this.frameId=requestAnimationFrame(this.step.bind(this)))}},{key:"stop",value:function(){this.running=!1,this.frameId&&cancelAnimationFrame(this.frameId)}},{key:"step",value:function(t){this.running&&(this.print((t-this.lastMoment)/1e3),this.lastMoment=t,this.frameId=requestAnimationFrame(this.step.bind(this)))}},{key:"print",value:function(t){this.props.onTick(t)}}]),t}(),W=function(){Object(P.a)((function(){}));var t=Object(u.f)().params.id,e=Object(r.useState)(!1),n=Object(k.a)(e,2),i=n[0],a=n[1],o=Object(r.useState)(!1),s=Object(k.a)(o,2),j=s[0],b=s[1],l=Object(r.useState)(),f=Object(k.a)(l,2),h=f[0],d=f[1],p=Object(G.a)(0),g=Object(k.a)(p,2),v=g[0],y=g[1],T=B({dir:"/data",configName:t,onError:Object(r.useCallback)((function(){d("This song does not exist")}),[d])}),D=Object(r.useMemo)((function(){return T&&new M.Howl({src:(t=T.audioUrl,Object(E.doIf)(t,(function(t){return!Object(F.isUrl)(t)}),(function(t){return S+t}))),autoplay:!1,onloaderror:function(t,e){console.warn(e),d("Cannot play song")},onload:function(){a(!0)}});var t}),[T]),L=D&&D.duration()?D.duration():120,z=Object(r.useCallback)((function(t){return y.inc(t)}),[y]),U=Object(r.useMemo)((function(){return new V({onTick:z})}),[z]);Object(r.useEffect)((function(){U&&v&&(v<L||(U.stop(),b(!1),y.reset()))}),[L,v,y,U,b]),Object(r.useEffect)((function(){D&&U&&(j?(D.play(),U.start()):(D.pause(),U.stop()))}),[D,j,U]);var q=Object(r.useCallback)((function(t){return 1-Math.abs(t-v)/L}),[v,L]);if(h)return Object(c.jsx)(x,{height:400,children:h});if(!T||!i)return Object(c.jsx)(A,{});var H=Object(E.timeSplit)(v),K=H.m,Q=H.s,W=Object(E.timeSplit)(L),Z=W.m,$=W.s;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(J,{opacity:.4,bgcolor:T.backgroundColour,src:T.backdrop}),Object(c.jsx)(m,{color:T.textColour,top:0,children:T.lyrics.map((function(t,e){return q(t.time)>.94&&Object(c.jsx)(O.a,{mt:1,mb:1,className:"parole",style:{opacity:q(t.time)>.98?1:.4,fontSize:q(t.time)>.99?20:16},children:t.text},"lyrics-row-".concat(e))}))}),Object(c.jsxs)(m,{borderRadius:"20px 20px 0 0",p:2,bgcolor:Y,children:[Object(c.jsxs)(O.a,{width:"100%",children:[Object(c.jsx)(w.a,{children:T.title}),Object(c.jsx)(O.a,{mt:-1,children:Object(c.jsx)(w.a,{variant:"overline",children:T.artist})})]}),Object(c.jsx)(O.a,{width:"100%",children:Object(c.jsx)(C.a,{onChangeCommitted:function(t,e){D.seek(v)},onChange:function(t,e){y.set(L*(Array.isArray(e)?e[0]:e)/100)},className:"progress-bar",value:100*v/L,color:"secondary",marks:T.lyrics.map((function(t){return{value:100*t.time/L}}))})}),Object(c.jsx)(O.a,{border:"4px solid",borderColor:"#444",borderRadius:40,children:Object(c.jsx)(I.a,{onClick:function(){b(!j),Object(E.devlog)(v)},children:j?Object(c.jsx)(N.a,{}):Object(c.jsx)(R.a,{})})})]}),Object(c.jsx)(m,{alignItems:"flex-start",bottom:"auto",top:0}),Object(c.jsx)(m,{bottom:2*X,left:X,right:"auto",children:Object(c.jsx)(O.a,{children:Object(c.jsx)(w.a,{children:"".concat(K,":").concat(Q)})})}),Object(c.jsx)(m,{bottom:2*X,right:X,left:"auto",children:Object(c.jsx)(O.a,{children:Object(c.jsx)(w.a,{children:"".concat(Z,":").concat($)})})})]})},X=16,Y=Object(E.transparent)(.5,255),Z=function(){var t=B({configName:"meta",ext:".ini"});return Object(E.devlog)(t),t&&window.location.host===t.origin?Object(c.jsx)(s.a,{children:Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{exact:!0,path:"/play/:id",component:W}),Object(c.jsx)(u.a,{component:y})]})}):Object(c.jsx)(c.Fragment,{})},$=Object(j.a)({init:!1,locale:"zh",common:{}}),_=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,348)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),r(t),i(t),a(t)}))};o.a.render(Object(c.jsx)(Z,{}),document.getElementById("root")),_()}},[[321,1,2]]]);